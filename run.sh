#!/bin/bash

# Проверяем существование виртуального окружения
if [ ! -d ".venv" ]; then
    echo "Ошибка: Виртуальное окружение .venv не найдено!"
    echo "Создайте его командой: python3 -m venv .venv"
    exit 1
fi

# Активируем виртуальное окружение
echo "Активируем виртуальное окружение..."
source .venv/bin/activate

# Проверяем, что активация прошла успешно
if [ "$VIRTUAL_ENV" != "" ]; then
    echo "Виртуальное окружение активировано: $VIRTUAL_ENV"
else
    echo "Ошибка: Не удалось активировать виртуальное окружение"
    exit 1
fi

# Устанавливаем зависимости, если их нет
echo "Проверяем зависимости..."
pip install -q -r requirements.txt

# Запускаем основной скрипт
echo "Запускаем проект..."
python main.py

# Деактивируем виртуальное окружение (опционально, так как скрипт завершится)
deactivate 